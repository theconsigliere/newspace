{"version":3,"sources":["../gallery.js"],"names":["Gallery","gallery","Error","currentImage","galleryInner","querySelector","images","Array","from","querySelectorAll","modal","prevButton","nextButton","closeModal","classList","remove","window","removeEventListener","handleKeyUp","showNextImage","showPrevImage","event","key","showImage","nextElementSibling","firstElementChild","previousElementSibling","lastElementChild","el","src","textContent","title","dataset","description","matches","add","addEventListener","forEach","image","e","currentTarget","target","document","galleryBlock"],"mappings":"aAAA,SAASA,QAAQC,GAEb,IAAKA,EACH,MAAM,IAAIC,MAAM,qBAIlB,IAKIC,EALEC,EAAeH,EAAQI,cAAc,eACrCC,EAASC,MAAMC,KAAKP,EAAQQ,iBAAiB,QAC7CC,EAAQT,EAAQI,cAAc,kBAC9BM,EAAaD,EAAML,cAAc,SACjCO,EAAaF,EAAML,cAAc,SAkBvC,SAASQ,IACPH,EAAMI,UAAUC,OAAO,QAEvBC,OAAOC,oBAAoB,QAASC,GACpCN,EAAWK,oBAAoB,QAASE,GACxCR,EAAWM,oBAAoB,QAASG,GAS1C,SAASF,EAAYG,GACnB,MAAkB,WAAdA,EAAMC,IAAyBT,IACjB,eAAdQ,EAAMC,IAA6BH,IACrB,cAAdE,EAAMC,IAA4BF,SAAtC,EAGF,SAASD,IACPI,EAAUpB,EAAaqB,oBAAsBpB,EAAaqB,mBAE5D,SAASL,IACPG,EAAUpB,EAAauB,wBAA0BtB,EAAauB,kBAGhE,SAASJ,EAAUK,GACZA,IAMLlB,EAAML,cAAc,OAAOwB,IAAMD,EAAGC,IACpCnB,EAAML,cAAc,MAAMyB,YAAcF,EAAGG,MAC3CrB,EAAML,cAAc,YAAYyB,YAAcF,EAAGI,QAAQC,YACzD9B,EAAeyB,EAjDXlB,EAAMwB,QAAQ,WAIlBxB,EAAMI,UAAUqB,IAAI,QAGpBnB,OAAOoB,iBAAiB,QAASlB,GACjCN,EAAWwB,iBAAiB,QAASjB,GACrCR,EAAWyB,iBAAiB,QAAShB,KA6CvCd,EAAO+B,SAAQ,SAAAC,GAAK,OAClBA,EAAMF,iBAAiB,SAAS,SAAAG,GAAC,OAAIhB,EAAUgB,EAAEC,qBAInDlC,EAAO+B,SAAQ,SAAAC,GAEbA,EAAMF,iBAAiB,SAAS,SAAAG,GAEhB,UAAVA,EAAEjB,KAEJC,EAAUgB,EAAEC,qBAKlB9B,EAAM0B,iBAAiB,SAlDvB,SAA4BG,GACtBA,EAAEE,SAAWF,EAAEC,eACjB3B,OAqDNG,OAAOoB,iBAAiB,oBAAoB,WAC1CM,SAASjC,iBAAiB,qBAAqB4B,SAAS,SAACM,GACvD3C,QAAS2C","sourcesContent":["function Gallery(gallery) {\n\n    if (!gallery) {\n      throw new Error('No Gallery Found!');\n    }\n    \n    // select the elements we need\n    const galleryInner = gallery.querySelector('.js-gallery')\n    const images = Array.from(gallery.querySelectorAll('img'));\n    const modal = gallery.querySelector('.gallery-modal');\n    const prevButton = modal.querySelector('.prev');\n    const nextButton = modal.querySelector('.next');\n    let currentImage;\n  \n    function openModal() {\n      // console.info('Opening Modal...');\n      // First check if the modal is already open\n      if (modal.matches('.open')) {\n      //  console.info('Modal already open');\n        return; // stop the function from running\n      }\n      modal.classList.add('open');\n  \n      // Event listeners to be bound when we open the modal:\n      window.addEventListener('keyup', handleKeyUp);\n      nextButton.addEventListener('click', showNextImage);\n      prevButton.addEventListener('click', showPrevImage);\n    }\n  \n    function closeModal() {\n      modal.classList.remove('open');\n      // TODO: add event listeners for clicks and keyboard..\n      window.removeEventListener('keyup', handleKeyUp);\n      nextButton.removeEventListener('click', showNextImage);\n      prevButton.removeEventListener('click', showPrevImage);\n    }\n  \n    function handleClickOutside(e) {\n      if (e.target === e.currentTarget) {\n        closeModal();\n      }\n    }\n  \n    function handleKeyUp(event) {\n      if (event.key === 'Escape') return closeModal();\n      if (event.key === 'ArrowRight') return showNextImage();\n      if (event.key === 'ArrowLeft') return showPrevImage();\n    }\n  \n    function showNextImage() {\n      showImage(currentImage.nextElementSibling || galleryInner.firstElementChild);\n    }\n    function showPrevImage() {\n      showImage(currentImage.previousElementSibling || galleryInner.lastElementChild);\n    }\n  \n    function showImage(el) {\n      if (!el) {\n      //  console.info('no image to show');\n        return;\n      }\n      // update the modal with this info\n\n      modal.querySelector('img').src = el.src;\n      modal.querySelector('h2').textContent = el.title;\n      modal.querySelector('figure p').textContent = el.dataset.description;\n      currentImage = el;\n      openModal();\n    }\n  \n    // These are our Event Listeners!\n    images.forEach(image =>\n      image.addEventListener('click', e => showImage(e.currentTarget))\n    );\n  \n    // loop over each image\n    images.forEach(image => {\n      // attach an event listener for each image\n      image.addEventListener('keyup', e => {\n        // when that is keyup'd, check if it was enter\n        if (e.key === 'Enter') {\n          // if it was, show that image\n          showImage(e.currentTarget);\n        }\n      });\n    });\n  \n    modal.addEventListener('click', handleClickOutside);\n  }\n  \n  // Use it on the page\n\n  window.addEventListener('DOMContentLoaded', () => {\n    document.querySelectorAll('.gallery__section').forEach( (galleryBlock) => {\n      Gallery( galleryBlock )\n    })\n});\n\n\n\n"]}